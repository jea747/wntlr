<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>íŠ¸ëŸ¬í”Œ ì¦ê¶Œì†Œ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Arial';
      background-color: #fffbe6;
      padding: 20px;
    }
    .hidden { display: none; }
    .btn { padding: 8px 16px; background-color: #ffde59; border: none; border-radius: 8px; cursor: pointer; margin: 5px; }
    .btn:hover { background-color: #ffd633; }
  </style>
</head>
<body>
  <h1>ğŸ“ˆ íŠ¸ëŸ¬í”Œ ì¦ê¶Œì†Œ</h1>

  <!-- ë¡œê·¸ì¸ í™”ë©´ -->
  <div id="login-screen">
    <input type="text" id="login-id" placeholder="ID ì…ë ¥">
    <input type="password" id="login-password" placeholder="ë¹„ë°€ë²ˆí˜¸ (ê´€ë¦¬ìë§Œ)">
    <button class="btn" onclick="login()">ë¡œê·¸ì¸</button>
  </div>

  <!-- ì‚¬ìš©ì í™”ë©´ -->
  <div id="user-screen" class="hidden">
    <h2>í™˜ì˜í•©ë‹ˆë‹¤, <span id="username"></span>ë‹˜!</h2>
    <p>ğŸ’° ì”ì•¡: <span id="balance">0</span>ì„œì°½</p>

    <div>
      <h3>ğŸ“¦ ì£¼ì‹ ë§¤ìˆ˜/ë§¤ë„</h3>
      <select id="stock-select"></select>
      <input type="number" id="stock-amount" placeholder="ìˆ˜ëŸ‰">
      <button class="btn" onclick="buyStock()">ë§¤ìˆ˜</button>
      <button class="btn" onclick="sellStock()">ë§¤ë„</button>
    </div>

    <div>
      <h3>ğŸ“Š ë‚´ ì£¼ì‹ í˜„í™©</h3>
      <ul id="my-stocks"></ul>
    </div>

    <div>
      <h3>ğŸ“ˆ ì£¼ê°€ ê·¸ë˜í”„</h3>
      <canvas id="stock-chart"></canvas>
    </div>
  </div>

  <!-- ê´€ë¦¬ì í™”ë©´ -->
  <div id="admin-screen" class="hidden">
    <h2>ğŸ” ê´€ë¦¬ì ëª¨ë“œ</h2>
    <input type="text" id="user-id" placeholder="ìœ ì € ID">
    <input type="number" id="amount" placeholder="ì¶©ì „í•  ì„œì°½">
    <button class="btn" onclick="chargeBalance()">ì„œì°½ ì¶©ì „</button>
  </div>

<script>
  const stocks = {
    'ë‹¹ê·¼ìœ ì„±': { price: 12, history: [12] },
    'íŠ¸ëŸ¬í”Œë§ˆì¼“': { price: 8, history: [8] },
    'ì„œì¤€ë¨¸ë‹ˆ': { price: 9.5, history: [9.5] },
    'íŠ¸ëŸ¬í”Œì•„ì§€ë§¤': { price: 5, history: [5] },
    'ìƒ˜ìˆ­ì „ì': { price: 13, history: [13] },
    'ì•„ë½€': { price: 7, history: [7] },
  };

  const users = {
    '5118': { balance: 0, stocks: {} }
  };

  let currentUser = null;

  function login() {
    const id = document.getElementById('login-id').value;
    const pw = document.getElementById('login-password').value;

    if (id === 'wjdwogus' && pw === 'wjdwogus') {
      document.getElementById('login-screen').classList.add('hidden');
      document.getElementById('admin-screen').classList.remove('hidden');
      currentUser = 'ADMIN';
    } else {
      if (!users[id]) users[id] = { balance: 0, stocks: {} };
      currentUser = id;
      document.getElementById('username').innerText = id;
      document.getElementById('login-screen').classList.add('hidden');
      document.getElementById('user-screen').classList.remove('hidden');
      updateUI();
    }
  }

  function updateUI() {
    document.getElementById('balance').innerText = users[currentUser].balance.toFixed(1);
    const select = document.getElementById('stock-select');
    select.innerHTML = '';
    for (let name in stocks) {
      select.innerHTML += `<option value="${name}">${name} (${stocks[name].price}ì„œì°½)</option>`;
    }
    const ul = document.getElementById('my-stocks');
    ul.innerHTML = '';
    const my = users[currentUser].stocks;
    for (let s in stocks) {
      const count = my[s] || 0;
      if (count > 0) {
        ul.innerHTML += `<li>${s}: ${count}ì£¼</li>`;
      }
    }
    drawChart();
  }

  function buyStock() {
    const name = document.getElementById('stock-select').value;
    const qty = parseInt(document.getElementById('stock-amount').value);
    const price = stocks[name].price;
    const total = price * qty;
    if (users[currentUser].balance >= total) {
      users[currentUser].balance -= total;
      users[currentUser].stocks[name] = (users[currentUser].stocks[name] || 0) + qty;
      updateUI();
    } else {
      alert('ì”ì•¡ ë¶€ì¡±!');
    }
  }

  function sellStock() {
    const name = document.getElementById('stock-select').value;
    const qty = parseInt(document.getElementById('stock-amount').value);
    const price = stocks[name].price;
    const myQty = users[currentUser].stocks[name] || 0;
    if (myQty >= qty) {
      users[currentUser].stocks[name] -= qty;
      users[currentUser].balance += price * qty;
      updateUI();
    } else {
      alert('ë³´ìœ  ì£¼ì‹ ë¶€ì¡±!');
    }
  }

  function chargeBalance() {
    const id = document.getElementById('user-id').value;
    const amount = parseFloat(document.getElementById('amount').value);
    if (!users[id]) users[id] = { balance: 0, stocks: {} };
    users[id].balance += amount;
    alert(`${id}ì˜ ì”ì•¡ì´ ${amount}ì„œì°½ ì¶©ì „ë¨!`);
  }

  function drawChart() {
    const ctx = document.getElementById('stock-chart').getContext('2d');
    const labels = Array.from({ length: stocks['ë‹¹ê·¼ìœ ì„±'].history.length }, (_, i) => `${i+1}ì¼ì°¨`);
    const datasets = Object.keys(stocks).map(name => ({
      label: name,
      data: stocks[name].history,
      fill: false,
      borderColor: '#' + Math.floor(Math.random()*16777215).toString(16),
    }));
    new Chart(ctx, {
      type: 'line',
      data: { labels, datasets },
    });
  }
</script>
</body>
</html>
